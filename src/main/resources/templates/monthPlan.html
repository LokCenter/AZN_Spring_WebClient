<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title th:text="${title}"></title>
    <link rel="stylesheet" th:href="@{/css/style.css}"/>
    <link rel="stylesheet" th:href="@{/css/monthPlan.css}"/>
    <link rel="stylesheet" th:href="@{/css/fragments/toggle.css}"/>
    <link rel="stylesheet" th:href="@{/css/fragments/daySwitch.css}">
    <script th:src="@{/js/helper/helper.js}"></script>
  </head>
  <body>
    <div th:replace="fragments/toggle :: toggle"></div>
    <div th:replace="fragments/dateSwitchMonthPlan :: dateSwitch"></div>

    <div class="container">
      <table>
        <thead>
          <tr>
            <th scope="column">Datum</th>
            <th scope="column">Arbeitsbeginn</th>
            <th scope="column">Arbeitsende</th>
            <th scope="column">Pause</th>
            <th scope="column">Istzeit</th>
            <th scope="column">Sollzeit</th>
            <th scope="column">GLAZ</th>
            <th scope="column">Krank</th>
            <th scope="column">Urlaub</th>
            <th scope="column">Feiertag</th>
            <th scope="column">Schule</th>
            <th scope="column">Bemerkung</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <div class="submit-button-container"><button id="submit-azn">Arbeitszeitnachweis abgeben</button></div>
    </div>
    <script th:src="@{/js/monthPlan.js}"></script>
    <script th:src="@{/js/userCurrentPage.js}"></script>

    <script th:inline="javascript">
      /*<![CDATA[*/

      let data = /*[[${data}]]*/ null;


      // Initially set viewedDate to the current date
      let viewedDate = new Date();

      // check if query is set
      url = new URL(window.location.href);

      if (url.searchParams.has('year') && url.searchParams.has('month')) {
        // url query's
        year = getQueryByName('year');
        month = getQueryByName('month');

        viewedDate = new Date(Number(year), Number(month), 1);
      }

      dateSwitchDate.textContent = `${getFullMonth(viewedDate.getMonth())} ${viewedDate.getFullYear()}`;

      displayTable(viewedDate, data);

      /*]]>*/
    </script>
  </body>
</html>